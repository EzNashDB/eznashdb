{% extends "base.html" %}
{% load eznashdb_tags %}
{% block content %}

  <div>
    {% for shul in shuls %}
      <div class="px-2 d-flex justify-content-between shadow-sm bg-light rounded border">
        <div class="fw-bold">{{shul.name}}</div>
        <div>
          <form 
            action="{% url 'eznashdb:delete_shul' shul.pk %}" method="POST"
            class="d-inline-block"
          >
            {% csrf_token %}
            <button type="submit" class="btn btn-sm text-danger link-danger">
              <i class="fa fa-trash" aria-hidden="true"></i>
              Delete Shul
            </button>
          </form>
          <span>
            Fem. Leadership: {{ shul.has_female_leadership|bool_to_icon }}
          </span>
          <span class="ps-2">
            Childcare: {{ shul.has_childcare|bool_to_icon }}
          </span>
          <span class="ps-2">
            Kaddish: {{ shul.can_say_kaddish|bool_to_icon }}
          </span>
        </div>
      </div>
      {% for room in shul.rooms.all %}
        <div class="w-100 card">
          <div class="card-header">{{room.name}}</div>
          <div class="card-body">
            <div class="d-flex justify-content-between px-1 pb-2">
              <div class="text-center">
                <div class="room-size-badge">
                  {% if room.relative_size %}
                  <small>
                    <span class="badge bg-secondary fw-bold w-100">
                      {{room.relative_size}}
                    </span>
                  </small>
                  {% else %}
                    --
                  {% endif %}
                </div>
              </div>
              <div>
                <div class="d-inline-block me-1">
                  <small><small>
                    <span>
                      <i class="fa-solid fa-volume-high"></i>
                      /
                      <i class="fa-solid fa-eye"></i>
                    </span>
                  </small></small>
                </div>
                <div class="d-inline-block">
                  <div class="see-hear-score">
                    {% if room.see_hear_score %}
                    <small>
                      {{room.see_hear_score|score_to_stars}}
                    </small>
                    {% else %}
                    --
                    {% endif %}
                  </div>
                </div>
              </div>
              <small>
                <div class="text-center">
                  <i class="fa-solid fa-wheelchair"></i> 
                  {{room.is_wheelchair_accessible|bool_to_icon}}
                </div>
              </small>
            </div>
            <small>
              <div class="row m-0">
                {% for layout_display_data in room|get_layout_type_display_data_list %}
                  <div class="col-12 px-0">
                    {% if layout_display_data.as_bool %}
                      <span>
                        <span class="pe-1 fw-bold">{{layout_display_data.layout_type}}:</span>
                        <span>{{layout_display_data.as_string}}</span>
                      </span>
                    {% endif %}
                  </div>
                {% endfor %}
              </div>
            </small>
          </div>
        </div>
      {% endfor %}
    {% endfor %}
  </div>

  {% if not shuls %}
  <div class="w-100 p-3 text-center">
    <span class="text-muted h3">
      -- No Shuls Found --
    </span>
  </div>
  {% endif %}

{% endblock content %}
